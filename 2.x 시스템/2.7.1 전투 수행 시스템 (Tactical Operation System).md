## **2.7.1 전투 수행 시스템 (Tactical Operation System)**

### **1. 개요**

전투 수행 시스템은 플레이어(오퍼레이터)가 전투 중 개입 명령을 내렸을 때 해당 명령이 **AI 판단 구조**에 어떤 과정을 거쳐 반영되는지 정의한 시스템입니다.  
이 시스템은 **직접 조작이 아닌** AI의 목표, 행동 우선순위, 사고력 해석률에 간접적으로 영향을 주는 구조로 설계됩니다.

### **2. 명령 처리 단계 요약**

`[플레이어 명령 입력] → [명령 패킷 생성] → [통신 채널 전송 (지연/간섭 보정)] → [리더 명령 해석 (사고력 기반)] → [부대 행동 재조정] → [시각적 피드백 및 전장 반영]`

각 단계는 실제 전투 상황(통신 상태, 사기, 사고력)에 따라 반응 속도와 정확도가 달라집니다.

### **3. 단계별 세부 설명**

#### **3.1 플레이어 명령 입력**

- **입력 형태:**
    
    - UI 버튼 (공세, 수세, 방어 집중, 철수 등)
        
    - 특정 대상 지정 (Shift+Click)
        
    - 단축키 / 오퍼레이터 콘솔 명령
        
- 명령 발동 시점은 즉시, 그러나 효과는 **통신지연(Delay)**을 거쳐 반영됩니다.
    

#### **3.2 명령 패킷 생성**

명령은 내부적으로 다음 데이터를 포함하는 **패킷 객체**로 변환됩니다.

```CPP
CommandPacket {   
    type: CommandType,        // 명령 유형   
    target: Entity | Vector3, // 대상 or 위치   
    priority: float,          // 긴급도   
    issuedTime: float,        // 발신 시점   
    operatorFocus: float,     // 오퍼레이터 집중도 (자원) 
}

```

이후 이 패킷은 `BattleComChannel`을 통해 리더 AI에게 전송됩니다.

#### **3.3 통신 채널 전송**

- **전송 성공률**은 전장 환경에 따라 변동됩니다:
    
    - 통신 안정도 100% → 즉시 도달 (0.5s 지연)
        
    - 간섭 있음 → 최대 3~5초 지연
        
    - 통신 붕괴 → 명령 실패 판정 (FailFlag = true)
        
- 실패 시:
    
    - 리더는 “명령 손실” 로그를 출력합니다.
        
    - 일정 확률(사고력 × 통신 복원력)에 따라 **추정 판단 명령**을 자율 생성합니다.
        

#### **3.4 리더 명령 해석 (Interpretation Phase)**

##### **3.4.1 해석율 공식**

```
CommandPacket {   
    type: CommandType,        // 명령 유형   
    target: Entity | Vector3, // 대상 or 위치   
    priority: float,          // 긴급도   
    issuedTime: float,        // 발신 시점   
    operatorFocus: float,     // 오퍼레이터 집중도 (자원) 
}

```

- 100%에 가까울수록 명령을 정확히 이해하고 수행합니다.
    
- 낮을수록 지연, 오판, 일부 유닛 명령 누락 발생.
    

##### **3.4.2 리더 반응**

- 명령을 수신하면 현재 행동 우선순위를 재계산합니다.
    
- 재계산 주기: 즉시 + 다음 행동 틱(2~5초).
    
- AI 판단 로직에서 `Bias` 값이 추가됩니다.
    

예:

- “공세 전환” 명령 수신 → 공격 점수 +25%
    
- “집중 방어” 명령 수신 → 방어 점수 +50%, 이동 점수 -30%
    

#### **3.5 부대 행동 재조정 (Tactical Update)**

리더가 재계산된 판단을 각 유닛에게 전송합니다.  
유닛들은 **명령 신뢰도(LeaderTrust)** 값에 따라 순응 여부를 결정합니다.

`LeaderTrust = (훈련도 + 리더 사고력/2 + 사기) / 2`

- 신뢰도 70 이상: 즉시 명령 반영
    
- 신뢰도 50~70: 행동 지연 1틱(3~5초)
    
- 신뢰도 50 이하: 명령 일부 무시 (자율 판단 유지)
    

#### **3.6 시각적 피드백**

명령이 반영되면 UI에 다음 정보가 표시됩니다.

`[명령 실행 로그] > 공세 전환 명령 수신 (지연 2.1s) > 리더 해석율 87% / 신뢰도 평균 76% > 부대 전선 이동 중...`

전투 중 시각화 효과:

- 명령 전송 시 오퍼레이터 HUD에 **지휘선(통신 라인)** 표시
    
- 리더 주변에 **지휘 반경 원형 UI** (명령 유효 범위 표시)
    
- 지휘 중복 시 붉은 경고선 표시 (“혼선 위험!”)
    

### **4. 명령 반영 수식 요약**

|항목|변수|설명|
|---|---|---|
|해석율|`InterpretationAccuracy`|명령 이해 정확도|
|전송지연|`TransmissionDelay`|명령 반영까지 걸리는 시간|
|반영율|`EffectiveRate = InterpretationAccuracy - Delay × 5`|명령 효율 최종 보정|
|신뢰도|`LeaderTrust`|유닛 반응성 지표|
|명령 지속시간|`CommandDuration = 20 + (사고력/2)`초|효과 유지 시간|

### **5. 혼선(Confusion) 시스템**

플레이어가 짧은 간격으로 여러 명령을 내리면 AI가 혼란 상태에 빠질 수 있습니다.

|조건|결과|
|---|---|
|10초 내 3회 이상 명령|리더 판단 효율 -20% (20초 지속)|
|명령 충돌 (공세+철수)|최신 명령만 반영, 이전 명령 무효|
|명령 실패 연속 2회|사기 -10%, 통신 복원율 -15%|

UI상에서는 “신호 혼선 발생” 문구와 붉은 노이즈 효과 표시.

### **6. 오퍼레이터 포인트 시스템**

- 명령 1회 = 포인트 1 소모
    
- 포인트는 전투 시작 시 기본 5개, 추가 충전 불가
    
- 포인트 0이 되면 “통신 과부하” 상태 진입 → 명령 입력 비활성화 (30초 후 자동 회복)
    

### **7. 플레이 예시 흐름**

`플레이어: ‘공세 전환’ 명령 입력 → 0.5s → 통신 딜레이 2.3s 발생 → 리더 해석율 85%, 신뢰도 평균 78% → 3초 후 돌격병·정찰병 전선 이동 시작 → 방어병은 대기 유지 (명령 미해석) → 15초 후 명령 지속 만료 → 전선 재정비 완료, 전투 로그 갱신`

### **8. 시스템 의의**

이 시뮬레이션 플로우는 단순한 명령 입력이 아니라,  
AI·전장·플레이어의 **세 가지 의사결정 레이어가 실제로 충돌·조정되는 과정**을 표현합니다.

이를 통해 플레이어는 “내가 명령을 내렸지만, 그 명령이 완벽히 통하지 않는다”는  
현실적인 지휘 체험을 얻게 되며, **‘통신과 신뢰로 연결된 전장’**의 감각을 목표로 합니다.